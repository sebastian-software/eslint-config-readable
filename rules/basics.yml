#######################################################################################
# Basics
#######################################################################################

extends:
  - eslint:recommended

# That's required for async/await, class properties, Flow types and
# other still quite new language features.
parser: babel-eslint

parserOptions:
  ecmaVersion: 2018
  ecmaFeatures:
    impliedStrict: true
    experimentalObjectRestSpread: true
    jsx: true
  sourceType: module

env:
  browser: false
  node: false
  shared-node-browser: true
  es6: true
  commonjs: true

plugins:
  - babel
  - no-use-extend-native
  - tree-shaking
  - optimize-regex
  - immutable
  - jest

globals:
  # Allow access to process.env also in Non-Node environments. We want to
  # protect the user in frontend code to access other NodeJS objects - therefor
  # we do not enable Node-Env globally, but `process.env` should not throw with
  # the `no-undef` rule.
  process: true

rules:
  # Disallow trailing whitespace at the end of lines
  no-trailing-spaces:
    - warn

  # Enforce consistent linebreak style
  linebreak-style:
    - error
    - unix

  # Trailing newlines in non-empty files are a common UNIX idiom.
  eol-last: error

  # If you use the wrong greater than / less than sign in a for loop, it will
  # create an infinite loop condition. This is almost always unintentional.
  for-direction: error

  # Enforce strict mode globally which also happens during bundling
  strict:
    - error
    - global

  # Require Variable Declarations to be at the top of their scope
  # Does not improve maintainability in my opinion... instead makes
  # unused variables harder to track over time. Also a fully new situation
  # with the widely used const/let offerings of modern JS.
  vars-on-top:
    - off

  # Disallow the Unicode Byte Order Mark
  unicode-bom:
    - error
    - never

  # Require or disallow Yoda Conditions
  # Actually interesting that this ugliness should be even something to consider.
  yoda:
    - error
    - never

  # Prevent old style extensions of native objects
  no-use-extend-native/no-use-extend-native:
    - error

  # Babel Plugin settings for compat with Babel parser
  babel/new-cap:
    - error
    - capIsNew: false

  # Marks all side-effects in module initialization that will interfere with tree-shaking (e.g. in RollupJS)
  tree-shaking/no-side-effects-in-initialization:
    - warn

  # Warn on overly complex regexps
  optimize-regex/optimize-regex:
    - warn

  # Warn on most often unintentional modification of existing objects
  immutable/no-mutation:
    - warn
